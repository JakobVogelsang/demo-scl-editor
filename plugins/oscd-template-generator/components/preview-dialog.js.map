{"version":3,"file":"preview-dialog.js","sourceRoot":"","sources":["../../components/preview-dialog.ts"],"names":[],"mappings":";AAAA,sDAAsD;AACtD,OAAO,EAAE,mBAAmB,EAAE,MAAM,yCAAyC,CAAC;AAC9E,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,QAAQ,EAAE,MAAM,8CAA8C,CAAC;AACxE,OAAO,EAAE,YAAY,EAAE,MAAM,mDAAmD,CAAC;AACjF,OAAO,SAAS,MAAM,oBAAoB,CAAC;AAC3C,OAAO,EACL,uBAAuB,GAExB,MAAM,0BAA0B,CAAC;AAElC,OAAO,EAAE,gBAAgB,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAExE,MAAM,QAAQ,GAAG,aAAa,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,EAAE,CAAC;AAEzE,MAAM,OAAO,aAAc,SAAQ,mBAAmB,CAAC,UAAU,CAAC;IAAlE;;QAcE,cAAS,GAAkB,EAAE,CAAC;QAG9B,SAAI,GAAiC,SAAS,CAAC;QAG/C,cAAS,GAAW,EAAE,CAAC;IAmEzB,CAAC;IAjEC,IAAI,UAAU;QACZ,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YACrD,OAAO,uCAAuC,CAAC;QACjD,CAAC;QACD,IAAI,CAAC;YACH,MAAM,GAAG,GAAG,gBAAgB,EAAE,CAAC;YAC/B,MAAM,OAAO,GAAG,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,EAAE;gBAC3D,KAAK,EAAE,IAAI,CAAC,SAAS;gBACrB,IAAI,EAAE,IAAI,CAAC,IAAI;aAChB,CAAC,CAAC;YACH,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBACvB,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,CAAC;oBACjC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACzC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,OAAO,kBAAkB,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,kCAAkC,KAAK,MAAM,CAAC;QACvD,CAAC;IACH,CAAC;IAED,IAAI;;QACF,MAAA,IAAI,CAAC,MAAM,0CAAE,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;2BACY,GAAG,EAAE,WAAC,OAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,KAAK,EAAE,CAAA,EAAA;;;;;oBAKjC,aAAa,QAAQ,EAAE;;;qBAGtB,IAAI,CAAC,UAAU;;;;;mCAKD,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;;;;;KAKvD,CAAC;IACJ,CAAC;;AAnEM,4BAAc,GAAG;IACtB,WAAW,EAAE,QAAQ;IACrB,gBAAgB,EAAE,YAAY;IAC9B,YAAY,EAAE,SAAS;CACxB,AAJoB,CAInB;AAiEK,oBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;GAgBlB,AAhBY,CAgBX;AA9EF;IADC,KAAK,CAAC,WAAW,CAAC;6CACD;AAGlB;IADC,KAAK,CAAC,YAAY,CAAC;gDACE;AAGtB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;gDACG;AAG9B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;2CACoB;AAG/C;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;gDACJ","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { ScopedElementsMixin } from '@open-wc/scoped-elements/lit-element.js';\nimport { LitElement, html, css } from 'lit';\nimport { query, property } from 'lit/decorators.js';\nimport { MdDialog } from '@scopedelement/material-web/dialog/dialog.js';\nimport { MdTextButton } from '@scopedelement/material-web/button/text-button.js';\nimport AceEditor from 'ace-custom-element';\nimport {\n  insertSelectedLNodeType,\n  LNodeDescription,\n} from '@openenergytools/scl-lib';\nimport { TreeSelection } from '@openenergytools/tree-grid';\nimport { createBaseSCLDoc, serializeAndFormat } from '../foundation.js';\n\nconst aceTheme = `solarized_${localStorage.getItem('theme') || 'light'}`;\n\nexport class PreviewDialog extends ScopedElementsMixin(LitElement) {\n  static scopedElements = {\n    'md-dialog': MdDialog,\n    'md-text-button': MdTextButton,\n    'ace-editor': AceEditor,\n  };\n\n  @query('md-dialog')\n  dialog!: MdDialog;\n\n  @query('ace-editor')\n  aceEditor!: AceEditor;\n\n  @property({ type: Object })\n  selection: TreeSelection = {};\n\n  @property({ type: Object })\n  tree: LNodeDescription | undefined = undefined;\n\n  @property({ type: String })\n  lNodeType: string = '';\n\n  get xmlContent(): string {\n    if (!this.selection || !this.tree || !this.lNodeType) {\n      return '<!-- No data selected for preview -->';\n    }\n    try {\n      const doc = createBaseSCLDoc();\n      const inserts = insertSelectedLNodeType(doc, this.selection, {\n        class: this.lNodeType,\n        data: this.tree,\n      });\n      inserts.forEach(insert => {\n        if (insert.parent && insert.node) {\n          insert.parent.appendChild(insert.node);\n        }\n      });\n      return serializeAndFormat(doc);\n    } catch (error) {\n      return `<!-- Error generating preview: ${error} -->`;\n    }\n  }\n\n  show() {\n    this.dialog?.show();\n  }\n\n  render() {\n    return html`\n      <md-dialog @closed=${() => this.dialog?.close()}>\n        <div slot=\"headline\">Preview LNodeType</div>\n        <div slot=\"content\">\n          <ace-editor\n            mode=\"ace/mode/xml\"\n            theme=${`ace/theme/${aceTheme}`}\n            wrap\n            style=\"width: 80vw;\"\n            .value=${this.xmlContent}\n            readonly\n          ></ace-editor>\n        </div>\n        <div slot=\"actions\">\n          <md-text-button @click=${() => this.dialog.close()} type=\"button\"\n            >Close</md-text-button\n          >\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  static styles = css`\n    md-dialog {\n      --md-dialog-container-max-width: 90vw;\n      max-width: 90vw;\n      max-height: 100vh;\n    }\n    [slot='content'] {\n      padding: 12px;\n    }\n    ace-editor {\n      height: calc(100vh - 240px);\n      box-sizing: border-box;\n    }\n    md-text-button {\n      text-transform: uppercase;\n    }\n  `;\n}\n"]}